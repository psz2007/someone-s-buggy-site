---
layout: default
title: 定积分
sort_order: 1
is_note: true
---

不定积分被直接定义为导数的逆运算，但是这样定义会有很多问题，比如我们知道函数的导数在值域上是连续的，那么所有分段函数都是不可不定积分的。

## 黎曼积分

现在换用「区间面积」来表示积分。

对于函数 $f(x)$ 在区间 $[a,b]$ 上有定义，定义一个划分 $P=\{p_0,p_1,...,p_n\}$，满足 $a=p_0<p_1<...<p_n=b$。

定义

$$
U(f,P)=\sum_{i=1}^n \sup\{x_k|k\in [x_{i-1},x_i]\}(x_i-x_{i-1})\\
L(f,P)=\sum_{i=1}^n \inf\{x_k|k\in [x_{i-1},x_i]\}(x_i-x_{i-1})
$$

- $U(f,P)\ge L(f,P)$。

- $U(f,P_1)\ge L(f,P_2)$ 。

这个证明考虑，令 $P_3=P_1\cup P_2$ 。

那么有 $U(f,P_1)\ge U(f,P_3)\ge L(f,P_3)\ge L(f,P_2)$。

然后定义：

$$
U(f)=\inf\{U(f,P)\}\\
D(f)=\sup\{D(f,P)\}
$$

这样就有 $U(f)\ge D(f)$。

那么如果有 $U(f)=D(f)$，则 $f$ 在 $[a,b]$ 可黎曼积分，那么这个值就是 $f$ 在区间 $[a,b]$ 上的黎曼积分。

$$
\int_{a}^b f=U(f)=D(f)
$$

## 黎曼可积性

上面的定义比较复杂，我们推几个条件来说明可积。

> $\forall \epsilon>0,\exists P_{\epsilon},\text{s.t.}$
>
> $$
> U(f,P_{\epsilon})-L(f,P_{\epsilon})<\epsilon
> $$
>
> 则说明 $f$ 可黎曼积分。

证明用了 $\forall \epsilon,|a-b|<\epsilon,a=b$。

- 闭区间上连续函数必定可黎曼积分。

闭区间上连续说明是一致连续，也就是 $\forall \epsilon,\exists n,\text{s.t.} \forall |x_1-x_2|<n,|f(x_1)-f(x_2)|<\epsilon$。

因此直接按 $n$ 是每个块的长度划分即可。

- 闭区间上单调区间必定可黎曼积分。

钦定区间长度是 $\dfrac{\epsilon}{f(b)-f(a)}$ 即可。

- 区间上有有限个不连续点的有界函数一定黎曼可积。

我只要给这些不连续点分配一个很小的区间就行。

- 对于函数 $f$，如果存在可积函数 $g$，满足 $\forall \epsilon$，如果只有可数个点满足 $|f(x)-g(x)|>\epsilon$ ，那么 $f$ 也是可积函数。

证明和上面类似，给这些差异点一个很小的区间。

- 如果 $f,g$ 都可积，那么 $f\times g$ 可积。

可积说明一定有界，因此证明不难。

- 积分有保序性。

$$
\forall x\in [a,b],f(x)\ge g(x)\\
\int_a^b f\ge  \int_a^b g
$$

- 积分中值定理。

$$
\int_{a}^b f(x)g(x)dx=\eta \int_{a}^b g(x)dx
$$

其中 $f(x)$ 有界且同号，$\eta$ 是 $f$ 界区间里面的。

证明就是保序性，$\eta$ 取最大最小包含了左边的结果，这个结果说明了两个函数乘起来积分就像是加权平均数。

- 黎曼积分结果转化为离散不等式。

注意到黎曼积分本质就是写成一个

$$
\sum_{i=1}^n f(x)\Delta x
$$

的形式，它本质上和离散情况下的函数点值求和没什么区别，所以可以迁移。

$$
\frac{1}{b-a}\int_a^b\ln f(x)dx\le \ln (\frac{1}{b-a}\int_a^b f(x) dx)
$$

这个东西把 $\int$ 换成 $\sum$ 就是利用 $\ln$ 上凸性，由于黎曼函数的性质，所以可以这样直接转化成 $\int$。

同理，我们有柯西不等式：

$$
(\int_a^b |f(x)g(x)|dx)^2\le  (\int_a^b |f(x)|dx)^2(\int_a^b |g(x)|dx)^2
$$

## 微积分基本定理

实际上就是说积分是导数的逆运算，有了定积分，我们可以把 $x$ 放在 $\int$ 范围的限制上面。

$$
F(x)=\int_a^x f(t)dt\\
F'(x)=f(x)\\
\int_a^b f(x) dx=F(b)-F(a)=F(x)|_a^b
$$

这是顶标是 $x$ 的特殊情况，现在考虑一般情况。

$$
F(x)=\int_{v(x)}^{u(x)} f(t)dt
$$

求 $F'(x)$。

令 $G(x)=\int_0^x f(t)dt,G'(x)=f(x)$。

那么

$$
F(x)=G(u(x))-G(v(x))\\
F'(x)=G'(u(x))u'(x)-G'(v(x))v'(x)\\
F'(x)=f(u(x))u'(x)-f(v(x))v'(x)
$$

>求
>$$
>\lim_{x\to 0^+} \frac{\int_0^{x^2}\sin\sqrt{t}dt}{x^3}
>$$

这种题，由于上面积分在 $x=0$ 处显然是 $0$ ，于是可以直接洛必达法则来产生求导：

$$
=\frac{2x\sin x}{3x^2}=\frac{2\sin x}{3x}=\frac{2}{3}
$$

> 求
>$$
>\lim_{n\to \infty} \sum_{i=n+1}^{2n}\frac{1}{i}
>$$

我想得做法比较简单，就是考虑由于这个函数单调，所以可以用两个函数夹逼：

$$
\int_{n+1}^{2n+1}\frac{1}{x}dx<ans<\int_n^{2n} \frac{1}{x}dx
$$

左右都是 $\ln 2$ 。

题解做法是，这题可以用黎曼和的定义。

$$
=\frac{1}{n}\sum_{i=1}^n \frac{1}{1+\frac{i}{n}}
$$

这里，下面的 $\dfrac{i}{n}$ 就是把 $1$ 进行一个划分，划分成 $\infty$ 块，每块长度是 $\dfrac{1}{n}$，所以可以转化为积分：

$$
=\int_0^1 \frac{1}{1+x}dx=\ln 2
$$

算定积分时，要特别注意换元的时候限制区间要跟着变。

其实好像不定积分转化回最初的形式就可以不看限制区间了。